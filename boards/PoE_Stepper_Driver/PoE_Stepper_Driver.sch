EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 3
Title "PoE Stepper Driver"
Date "2022-02-22"
Rev "1.0"
Comp "ECE445"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 12050 950  1025 400 
U 620ECB3C
F0 "Ethernet" 50
F1 "Ethernet.sch" 50
$EndSheet
$Sheet
S 12050 1625 1025 275 
U 6293177D
F0 "Motor_Control" 50
F1 "Motor_Control.sch" 50
$EndSheet
Text GLabel 7625 2750 0    50   Input ~ 0
PWRGD
Text GLabel 7625 2550 0    50   Input ~ 0
VOUT+
Text GLabel 7625 2950 0    50   Input ~ 0
VOUT-
$Comp
L MCU_ST_STM32F4:STM32F407VETx U3
U 1 1 6214C299
P 4125 3900
F 0 "U3" H 3350 6600 50  0000 C CNN
F 1 "STM32F407VETx" H 3325 6700 50  0000 C CNN
F 2 "Package_QFP:LQFP-100_14x14mm_P0.5mm" H 3425 1300 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00037051.pdf" H 4125 3900 50  0001 C CNN
	1    4125 3900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR07
U 1 1 6214E350
P 4125 6750
F 0 "#PWR07" H 4125 6500 50  0001 C CNN
F 1 "GND" H 4130 6577 50  0000 C CNN
F 2 "" H 4125 6750 50  0001 C CNN
F 3 "" H 4125 6750 50  0001 C CNN
	1    4125 6750
	1    0    0    -1  
$EndComp
Wire Wire Line
	3925 6700 3925 6750
Wire Wire Line
	3925 6750 4025 6750
Wire Wire Line
	4025 6700 4025 6750
Connection ~ 4025 6750
Wire Wire Line
	4025 6750 4125 6750
Wire Wire Line
	4125 6700 4125 6750
Connection ~ 4125 6750
Wire Wire Line
	4225 6700 4225 6750
Wire Wire Line
	4225 6750 4125 6750
Wire Wire Line
	4325 6700 4325 6750
Wire Wire Line
	4325 6750 4225 6750
Connection ~ 4225 6750
$Comp
L power:+3V3 #PWR08
U 1 1 621503A3
P 4175 1125
F 0 "#PWR08" H 4175 975 50  0001 C CNN
F 1 "+3V3" H 4190 1298 50  0000 C CNN
F 2 "" H 4175 1125 50  0001 C CNN
F 3 "" H 4175 1125 50  0001 C CNN
	1    4175 1125
	1    0    0    -1  
$EndComp
Wire Wire Line
	3825 1200 3825 1150
Wire Wire Line
	3825 1150 3925 1150
Wire Wire Line
	3925 1200 3925 1150
Connection ~ 3925 1150
Wire Wire Line
	3925 1150 4025 1150
Wire Wire Line
	4025 1200 4025 1150
Connection ~ 4025 1150
Wire Wire Line
	4025 1150 4125 1150
Wire Wire Line
	4125 1200 4125 1150
Wire Wire Line
	4225 1200 4225 1150
Wire Wire Line
	4325 1200 4325 1150
Wire Wire Line
	4325 1150 4225 1150
Wire Wire Line
	4425 1200 4425 1150
Wire Wire Line
	4425 1150 4325 1150
Connection ~ 4325 1150
Wire Wire Line
	4525 1200 4525 1150
Wire Wire Line
	4525 1150 4425 1150
Connection ~ 4425 1150
Wire Wire Line
	4125 1150 4175 1150
Connection ~ 4125 1150
Connection ~ 4225 1150
Wire Wire Line
	4175 1125 4175 1150
Connection ~ 4175 1150
Wire Wire Line
	4175 1150 4225 1150
$Comp
L Converter_DCDC:ATA00A18S-L U5
U 1 1 62155228
P 8175 2750
F 0 "U5" H 8175 3217 50  0000 C CNN
F 1 "12V DC/DC" H 8175 3126 50  0000 C CNN
F 2 "Converter_DCDC:Converter_DCDC_Artesyn_ATA_SMD" H 8175 2400 50  0001 C CIN
F 3 "https://www.artesyn.com/power/assets/ata_series_ds_01apr2015_79c25814fd.pdf" H 8175 2300 50  0001 C CNN
	1    8175 2750
	1    0    0    -1  
$EndComp
Wire Wire Line
	7625 2550 7675 2550
Wire Wire Line
	7625 2950 7675 2950
Wire Wire Line
	7625 2750 7675 2750
$Comp
L power:+12V #PWR014
U 1 1 62158186
P 8725 2525
F 0 "#PWR014" H 8725 2375 50  0001 C CNN
F 1 "+12V" H 8740 2698 50  0000 C CNN
F 2 "" H 8725 2525 50  0001 C CNN
F 3 "" H 8725 2525 50  0001 C CNN
	1    8725 2525
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR015
U 1 1 6215A31C
P 8725 2775
F 0 "#PWR015" H 8725 2525 50  0001 C CNN
F 1 "GND" H 8730 2602 50  0000 C CNN
F 2 "" H 8725 2775 50  0001 C CNN
F 3 "" H 8725 2775 50  0001 C CNN
	1    8725 2775
	1    0    0    -1  
$EndComp
Wire Wire Line
	8675 2550 8725 2550
Wire Wire Line
	8725 2550 8725 2525
Wire Wire Line
	8675 2750 8725 2750
Wire Wire Line
	8725 2750 8725 2775
$Comp
L Regulator_Linear:NCP1117-3.3_SOT223 U4
U 1 1 62160F45
P 7800 3925
F 0 "U4" H 7800 4167 50  0000 C CNN
F 1 "NCP1117" H 7800 4076 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-223-3_TabPin2" H 7800 4125 50  0001 C CNN
F 3 "http://www.onsemi.com/pub_link/Collateral/NCP1117-D.PDF" H 7900 3675 50  0001 C CNN
	1    7800 3925
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR012
U 1 1 621620E9
P 7800 4275
F 0 "#PWR012" H 7800 4025 50  0001 C CNN
F 1 "GND" H 7805 4102 50  0000 C CNN
F 2 "" H 7800 4275 50  0001 C CNN
F 3 "" H 7800 4275 50  0001 C CNN
	1    7800 4275
	1    0    0    -1  
$EndComp
$Comp
L device:CP1_Small C9
U 1 1 62162EF0
P 8250 4075
F 0 "C9" H 8341 4121 50  0000 L CNN
F 1 "10uF" H 8341 4030 50  0000 L CNN
F 2 "" H 8250 4075 50  0001 C CNN
F 3 "~" H 8250 4075 50  0001 C CNN
	1    8250 4075
	1    0    0    -1  
$EndComp
$Comp
L device:CP1_Small C8
U 1 1 621685D6
P 7325 4075
F 0 "C8" H 7125 4100 50  0000 L CNN
F 1 "10uF" H 7050 4025 50  0000 L CNN
F 2 "" H 7325 4075 50  0001 C CNN
F 3 "~" H 7325 4075 50  0001 C CNN
	1    7325 4075
	1    0    0    -1  
$EndComp
Text Notes 7175 2275 0    50   ~ 0
Power
$Comp
L device:C_Small C7
U 1 1 62172784
P 5150 1100
F 0 "C7" H 5242 1146 50  0000 L CNN
F 1 "0.1uF" H 5242 1055 50  0000 L CNN
F 2 "" H 5150 1100 50  0001 C CNN
F 3 "~" H 5150 1100 50  0001 C CNN
	1    5150 1100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR010
U 1 1 62173490
P 5150 1225
F 0 "#PWR010" H 5150 975 50  0001 C CNN
F 1 "GND" H 5155 1052 50  0000 C CNN
F 2 "" H 5150 1225 50  0001 C CNN
F 3 "" H 5150 1225 50  0001 C CNN
	1    5150 1225
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 1200 5150 1225
$Comp
L power:+3V3 #PWR09
U 1 1 62174C94
P 5150 975
F 0 "#PWR09" H 5150 825 50  0001 C CNN
F 1 "+3V3" H 5165 1148 50  0000 C CNN
F 2 "" H 5150 975 50  0001 C CNN
F 3 "" H 5150 975 50  0001 C CNN
	1    5150 975 
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 975  5150 1000
$Comp
L power:+12V #PWR011
U 1 1 62179052
P 7325 3900
F 0 "#PWR011" H 7325 3750 50  0001 C CNN
F 1 "+12V" H 7340 4073 50  0000 C CNN
F 2 "" H 7325 3900 50  0001 C CNN
F 3 "" H 7325 3900 50  0001 C CNN
	1    7325 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	7800 4225 7800 4250
$Comp
L power:+3V3 #PWR013
U 1 1 62181887
P 8650 3900
F 0 "#PWR013" H 8650 3750 50  0001 C CNN
F 1 "+3V3" H 8665 4073 50  0000 C CNN
F 2 "" H 8650 3900 50  0001 C CNN
F 3 "" H 8650 3900 50  0001 C CNN
	1    8650 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	7325 3900 7325 3925
Wire Wire Line
	7500 3925 7325 3925
Connection ~ 7325 3925
Wire Wire Line
	7325 3925 7325 3975
Wire Wire Line
	7325 4175 7325 4250
Wire Wire Line
	7325 4250 7800 4250
Connection ~ 7800 4250
Wire Wire Line
	7800 4250 7800 4275
Wire Wire Line
	7800 4250 8250 4250
Wire Wire Line
	8250 4250 8250 4175
Wire Wire Line
	8100 3925 8250 3925
Wire Wire Line
	8250 3925 8250 3975
$Comp
L device:C_Small C10
U 1 1 621AEC2B
P 8650 4075
F 0 "C10" H 8742 4121 50  0000 L CNN
F 1 "0.1uF" H 8742 4030 50  0000 L CNN
F 2 "" H 8650 4075 50  0001 C CNN
F 3 "~" H 8650 4075 50  0001 C CNN
	1    8650 4075
	1    0    0    -1  
$EndComp
Wire Wire Line
	8250 3925 8650 3925
Wire Wire Line
	8650 3925 8650 3900
Connection ~ 8250 3925
Wire Wire Line
	8650 3925 8650 3975
Connection ~ 8650 3925
Wire Wire Line
	8250 4250 8650 4250
Wire Wire Line
	8650 4250 8650 4175
Connection ~ 8250 4250
Text GLabel 5025 2000 2    50   Input ~ 0
SPI1_SCK
Text GLabel 5025 1900 2    50   Input ~ 0
SPI1_CS
Text GLabel 5025 3700 2    50   Input ~ 0
SPI1_MOSI
Text GLabel 5025 2100 2    50   Input ~ 0
SPI1_MISO
Text GLabel 5050 3200 2    50   Input ~ 0
CLK_429
Wire Wire Line
	5025 3200 5050 3200
$Comp
L device:Crystal_Small Y1
U 1 1 622B5795
P 2675 2850
F 0 "Y1" V 2650 2950 50  0000 L CNN
F 1 "8MHz" V 2725 2925 50  0000 L CNN
F 2 "" H 2675 2850 50  0001 C CNN
F 3 "~" H 2675 2850 50  0001 C CNN
	1    2675 2850
	0    1    1    0   
$EndComp
$Comp
L device:R_Small R3
U 1 1 622BAB3B
P 3000 3000
F 0 "R3" V 3100 3000 50  0000 C CNN
F 1 "R_Small" V 3175 3000 50  0000 C CNN
F 2 "" H 3000 3000 50  0001 C CNN
F 3 "~" H 3000 3000 50  0001 C CNN
	1    3000 3000
	0    1    1    0   
$EndComp
Wire Wire Line
	3100 3000 3225 3000
Wire Wire Line
	2675 2950 2675 3000
Wire Wire Line
	2675 3000 2900 3000
Wire Wire Line
	2675 2750 2675 2725
Wire Wire Line
	2675 2725 3075 2725
Wire Wire Line
	3075 2725 3075 2900
Wire Wire Line
	3075 2900 3225 2900
$Comp
L device:C_Small C3
U 1 1 622C7580
P 2525 2725
F 0 "C3" V 2296 2725 50  0000 C CNN
F 1 "C_Small" V 2387 2725 50  0000 C CNN
F 2 "" H 2525 2725 50  0001 C CNN
F 3 "~" H 2525 2725 50  0001 C CNN
	1    2525 2725
	0    1    1    0   
$EndComp
Wire Wire Line
	2625 2725 2675 2725
Connection ~ 2675 2725
$Comp
L device:C_Small C6
U 1 1 622C9DA4
P 2525 3000
F 0 "C6" V 2650 3000 50  0000 C CNN
F 1 "C_Small" V 2725 3000 50  0000 C CNN
F 2 "" H 2525 3000 50  0001 C CNN
F 3 "~" H 2525 3000 50  0001 C CNN
	1    2525 3000
	0    1    1    0   
$EndComp
Wire Wire Line
	2625 3000 2675 3000
Connection ~ 2675 3000
Wire Wire Line
	2425 2725 2400 2725
Wire Wire Line
	2400 2725 2400 2850
Wire Wire Line
	2400 3000 2425 3000
$Comp
L power:GND #PWR05
U 1 1 622D06D4
P 2275 2875
F 0 "#PWR05" H 2275 2625 50  0001 C CNN
F 1 "GND" H 2280 2702 50  0000 C CNN
F 2 "" H 2275 2875 50  0001 C CNN
F 3 "" H 2275 2875 50  0001 C CNN
	1    2275 2875
	1    0    0    -1  
$EndComp
Wire Wire Line
	2275 2875 2275 2850
Wire Wire Line
	2275 2850 2400 2850
Connection ~ 2400 2850
Wire Wire Line
	2400 2850 2400 3000
Text GLabel 5050 3300 2    50   Input ~ 0
CLK_2660
Wire Wire Line
	5025 3300 5050 3300
Text GLabel 5025 4200 2    50   Input ~ 0
SPI2_SCK
Text GLabel 5025 5200 2    50   Input ~ 0
SPI2_MOSI
Text GLabel 5025 4100 2    50   Input ~ 0
SPI2_CS
Wire Wire Line
	3100 4900 3225 4900
$Comp
L power:+3V3 #PWR06
U 1 1 6265F676
P 2325 4800
F 0 "#PWR06" H 2325 4650 50  0001 C CNN
F 1 "+3V3" H 2340 4973 50  0000 C CNN
F 2 "" H 2325 4800 50  0001 C CNN
F 3 "" H 2325 4800 50  0001 C CNN
	1    2325 4800
	1    0    0    -1  
$EndComp
$Comp
L device:R_Small R1
U 1 1 6266D089
P 2600 4875
F 0 "R1" V 2404 4875 50  0000 C CNN
F 1 "470" V 2495 4875 50  0000 C CNN
F 2 "" H 2600 4875 50  0001 C CNN
F 3 "~" H 2600 4875 50  0001 C CNN
	1    2600 4875
	0    1    1    0   
$EndComp
$Comp
L device:LED_Small D4
U 1 1 62671C5F
P 2850 4875
F 0 "D4" H 2850 4670 50  0000 C CNN
F 1 "LED" H 2850 4761 50  0000 C CNN
F 2 "" V 2850 4875 50  0001 C CNN
F 3 "~" V 2850 4875 50  0001 C CNN
	1    2850 4875
	-1   0    0    1   
$EndComp
Wire Wire Line
	2700 4875 2750 4875
$Comp
L device:R_Small R2
U 1 1 62679D47
P 2600 5050
F 0 "R2" V 2675 5050 50  0000 C CNN
F 1 "470" V 2750 5050 50  0000 C CNN
F 2 "" H 2600 5050 50  0001 C CNN
F 3 "~" H 2600 5050 50  0001 C CNN
	1    2600 5050
	0    1    1    0   
$EndComp
$Comp
L device:LED_Small D5
U 1 1 62679D4D
P 2850 5050
F 0 "D5" H 2850 5175 50  0000 C CNN
F 1 "LED" H 2850 5250 50  0000 C CNN
F 2 "" V 2850 5050 50  0001 C CNN
F 3 "~" V 2850 5050 50  0001 C CNN
	1    2850 5050
	-1   0    0    1   
$EndComp
Wire Wire Line
	2700 5050 2750 5050
Wire Wire Line
	2950 4875 3100 4875
Wire Wire Line
	3100 4875 3100 4900
Wire Wire Line
	2950 5050 3100 5050
Wire Wire Line
	3100 5050 3100 5000
Wire Wire Line
	3100 5000 3225 5000
Wire Wire Line
	2325 4800 2325 4875
Wire Wire Line
	2325 5050 2500 5050
Wire Wire Line
	2500 4875 2325 4875
Connection ~ 2325 4875
Wire Wire Line
	2325 4875 2325 5050
Text GLabel 3200 1500 0    50   Input ~ 0
NRST
Wire Wire Line
	3200 1500 3225 1500
Text GLabel 5025 4500 2    50   Input ~ 0
TXD1
Text GLabel 5025 4400 2    50   Input ~ 0
TXD0
Text GLabel 5025 4300 2    50   Input ~ 0
TXEN
Text GLabel 5025 5300 2    50   Input ~ 0
RXD0
Text GLabel 5025 2200 2    50   Input ~ 0
CRS_DV
Text GLabel 5025 1600 2    50   Input ~ 0
REF_CLK
Text GLabel 5025 5400 2    50   Input ~ 0
RXD1
Text GLabel 5025 1700 2    50   Input ~ 0
MDIO
Text GLabel 5025 5000 2    50   Input ~ 0
MDC
Text GLabel 5025 5100 2    50   Input ~ 0
SPI2_MISO
$EndSCHEMATC
